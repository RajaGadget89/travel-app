name: Deploy to Vercel

on:
  push:
    branches:
      - main                # ğŸš€ Production branch: à¸ªà¸³à¸«à¸£à¸±à¸šà¹‚à¸„à¹‰à¸”à¸—à¸µà¹ˆà¸à¸£à¹‰à¸­à¸¡ deploy à¸‚à¸¶à¹‰à¸™ Production
      - develop             # ğŸ§ª Development branch: à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸§à¸¡ feature à¸«à¸¥à¸²à¸¢à¸•à¸±à¸§à¸à¹ˆà¸­à¸™ release
      - 'feature/**'        # ğŸ§© Feature branches: à¹ƒà¸Šà¹‰à¸à¸±à¸’à¸™à¸²à¹à¸•à¹ˆà¸¥à¸°à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ à¹€à¸Šà¹ˆà¸™ feature/user-profile
      - 'fix/**'            # ğŸ Bugfix branches: à¹à¸à¹‰à¹„à¸‚à¸šà¸±à¹Šà¸à¸—à¸±à¹ˆà¸§à¹„à¸› à¹€à¸Šà¹ˆà¸™ fix/login-error
      - 'bugfix/**'         # ğŸ Alternative bugfix naming (à¸šà¸²à¸‡à¸—à¸µà¸¡à¹ƒà¸Šà¹‰ bugfix à¹à¸—à¸™ fix)
      - 'hotfix/**'         # ğŸš‘ Critical fix branches: à¹à¸à¹‰à¹„à¸‚à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™à¸—à¸µà¹ˆà¸à¸£à¸°à¸—à¸š Production
      - 'release/**'        # ğŸ¯ Release branches: à¹ƒà¸Šà¹‰à¹€à¸•à¸£à¸µà¸¢à¸¡ release à¸à¹ˆà¸­à¸™ merge à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆ main
      - 'experiment/**'     # ğŸ”¬ Experimental branches: à¸—à¸”à¸¥à¸­à¸‡à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ/à¹à¸™à¸§à¸„à¸´à¸”à¹ƒà¸«à¸¡à¹ˆà¹† à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸‚à¸­à¸‡à¸ˆà¸£à¸´à¸‡
      - 'ci/**'             # âš™ï¸ CI/CD testing branches: à¸—à¸”à¸ªà¸­à¸šà¸«à¸£à¸·à¸­à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡ pipeline à¸«à¸£à¸·à¸­ build config
      - 'test/**'           # ğŸ§ª Test-specific branches: à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸šà¸—à¸±à¹ˆà¸§à¹„à¸› (UI, devtools, etc.)
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Checkout Code
        uses: actions/checkout@v3

      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: ğŸ“¦ Install Dependencies
        run: npm install

      - name: ğŸ§ª Build Project
        run: npm run build

      - name: ğŸš€ Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          working-directory: ./
          vercel-args: '--prod' # à¸ˆà¸° deploy production à¸–à¹‰à¸² push à¹„à¸› main
        env:
          VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}

